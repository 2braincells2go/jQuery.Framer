/**
 * jQuery Framer Plugin
 *
 * @author		Hirohisa Nagai
 * @version		0.80
 * @copyright	eternity design ( http://eternitydesign.net/ )
 * @license		MIT License
 *
 * include spin.js
 * fgnass.github.com/spin.js#v2.0.1
 *
 */
!function($){var t=$.Framer={};$.fn.Framer=function(e){e=$.extend({loadingColor:"#fff",opacity:.8,overlayTime:500,isOverlayClose:!0,isAutoResize:!0,isScroll:!0,resizeRatio:.9,speed:500,title:'<div id="frmTitle"></div>',description:'<div id="frm_description">{description}</div>',closeBtn:'<div class="close_btn"></div>',inner:{},width:640,height:360,iframe:'<iframe name="framer-iframe" frameborder="0" id="framer-iframe"></iframe>',ajaxDataType:"html",blur:"",isPushState:!1,isCSSAnim:!1},e),t.target,t.body,t.contents,t.indicator,t.box,t.type,t.title,t.description,t.closeBtn,t.container=null,t.blurTarget;var i,r,a,o=!1,n=location.href;t.open=function(a){t.body=$("body"),r=$('<div id="frm_overlay"></div>'),r.css("opacity",0),r.height($(document).height()).width($(window).width()),i=$('<div id="loading"></div>').css({width:$(window).width(),height:$(window).height(),top:$(window).scrollTop(),left:0});var o={lines:12,width:4,color:e.loadingColor,top:.5*$(window).height(),left:.5*$(window).width()};return t.indicator=new Spinner(o).spin(i[0]),t.body.append(i),t.body.append(r),r.fadeTo(e.overlayTime,e.opacity),""!==e.blur&&(console.log(e.blur),t.blurTarget=$(e.blur).Vague({intensity:8,animationOptions:{duration:e.speed,easing:"linear"}}),t.blurTarget.blur()),t.box=$('<div id="framer"></div>'),arguments.length>1?(t.target=$("<a />"),t.target.attr("href",arguments[0]),t.target.attr("data-framer-type",arguments[1]),$.isPlainObject(arguments[2])&&(e=$.extend(e,arguments[2]))):t.target=$(this),$.isEmptyObject(e.inner)||t.box.append(e.inner),t.target.attr("title")&&""!=e.title&&(t.title=e.title.search(/{title}/)?$(e.title.replace(/{title}/,t.target.attr("title"))):$(e.title).text(t.target.attr("title")),t.box.append(t.title)),t.target.attr("data-framer-description")&&""!=e.description&&(t.description=e.description.search(/{description}/)?$(e.description.replace(/{description}/,t.target.attr("data-framer-description"))):$(e.description).text(t.target.attr("data-framer-description")),t.box.append(t.description)),t.type=f(t.target.attr("href"),t.target.attr("data-framer-type")),"image"==t.type?(t.contents=$("<img />").on("load",function(){s()}).on("error",function(){}),t.contents.attr("src",t.target.attr("href"))):"inline"==t.type?t.contents=g():"video"==t.type?t.contents=w():"youtube"==t.type?t.contents=b():"vimeo"==t.type?t.contents=v():"soundcloud"==t.type?t.contents=x():"twitch"==t.type?t.contents=y():"iframe"==t.type?t.contents=S():"ajax"==t.type&&C.apply(this),"image"!=t.type&&"ajax"!=t.type&&s(),t.box.addClass(t.type),$(window).on("resize.Framer",p),e.isScroll&&($(window).on("scroll.Framer",m),$(window).on("scrollComplete.Framer",u)),!1},t.close=function(){$(window).off("resize.Framer",p),e.isScroll&&($(window).off("scroll.Framer",m),$(window).off("scrollComplete.Framer",u)),e.isOverlayClose&&r.off("click",$.Framer.close),t.closeBtn.off("click",$.Framer.close),""!=e.closeBtn&&t.closeBtn.fadeOut(e.speed),r.fadeOut(e.overlayTime),""!==e.blur&&t.blurTarget.unblur(),e.isCSSAnim?(t.box.removeClass("show"),setTimeout(d,e.speed)):t.box.fadeOut(e.speed,d)};var d=function(){"inline"==t.type?(t.contents.hide(),t.body.append(t.contents)):"video"==t.type&&FramerVideo.destroy(),$.isEmptyObject(e.inner)||$(e.inner).remove(),t.title&&t.title.remove(),t.description&&t.description.remove(),t.closeBtn.remove(),"inline"!=t.type&&t.contents.remove(),e.isCSSAnim&&t.container.remove(),t.box.remove(),r.remove(),e.isPushState&&o&&window.history.back(),t.body.trigger("close.Framer")},s=function(){l(),c(),t.indicator.stop(),i.remove(),delete t.indicator,""!=e.closeBtn&&(t.closeBtn=$(e.closeBtn)),e.isCSSAnim?t.box.css({display:"block"}).addClass("show").delay(e.speed,h):t.box.fadeIn(e.speed,function(){h()})},h=function(){if("video"==t.type&&(FramerVideo=_V_("Framer_video",$.parseJSON(t.target.attr("data-framer-video-setup"))),z())){var i=t.target.attr("href");i.match(/\.webm$/i)||i.match(/\.webm$/i)||i.match(/\.mp4$/i)?i.match(/\.mp4$/i)&&FramerVideo.src(i):FramerVideo.src(i+".mp4"),FramerVideo.width(t.contents.width()||t.target.attr("data-framer-width")||e.width),FramerVideo.height(t.contents.height()||t.target.attr("data-framer-height")||e.height)}e.isOverlayClose&&r.on("click",$.Framer.close),""!=e.closeBtn&&(t.box.append(t.closeBtn),t.closeBtn.fadeIn(e.speed),t.closeBtn.on("click",$.Framer.close)),e.isPushState&&null!=t.target.attr("data-framer-ps")&&(window.history.pushState(t.target.attr("data-framer-ps"),"",t.target.attr("data-framer-ps")),o=!0),t.body.trigger("open.Framer")},c=function(){e.isCSSAnim?t.container.css({top:Math.floor(.5*($(window).height()-t.box.outerHeight()))+$(window).scrollTop(),left:Math.floor(.5*($(window).width()-t.box.outerWidth()))}):t.box.css({top:Math.floor(.5*($(window).height()-t.box.outerHeight()))+$(window).scrollTop(),left:Math.floor(.5*($(window).width()-t.box.outerWidth()))})},l=function(){var i,r;if("image"==t.type){var a=j(t.contents[0]);i=t.target.attr("data-framer-width")||a.width,r=t.target.attr("data-framer-height")||a.height,t.target.attr("data-framer-width")&&t.contents.width(t.target.attr("data-framer-width")),t.target.attr("data-framer-height")&&t.contents.height(t.target.attr("data-framer-height"))}else"video"!=t.type||$.support.opacity?(i=t.target.attr("data-framer-width")||t.contents.outerWidth(),r=t.target.attr("data-framer-height")||t.contents.outerHeight()):(i=t.target.attr("data-framer-width")||e.width,r=t.target.attr("data-framer-height")||e.height);t.box.append(t.contents),e.isCSSAnim?(t.container=$('<div id="framerContainer" />'),t.container.append(t.box),t.body.append(t.container)):t.body.append(t.box);var o=t.box.outerWidth(),n=t.box.outerHeight(),d=$(window).width(),s=$(window).height(),h=o-t.box.width(),c=n-t.box.height(),l=d-i,p=s-r,m=t.box.height()-r,u;l>p?s*e.resizeRatio<n?e.isAutoResize&&(t.box.height(s*e.resizeRatio-c),u=(t.box.height()-m)/r,t.box.width(i*u),t.contents.width("image"!=t.type&&i!=t.contents.width()?t.box.width()-(i-t.contents.width()):t.box.width()),t.contents.height("image"!=t.type&&r!=t.contents.height()?t.box.height()-(r-t.contents.height())-m:t.box.height()-m)):("image"==t.type&&t.contents.width(i).height(r),t.box.width()<i&&t.box.width(t.box.width()>0?parseInt(i)+parseInt(t.box.width()):i),console.log("FRM.box.height()",t.box.height(),r,t.box),t.box.height()<r&&t.box.height(t.box.height()>0?parseInt(r)+parseInt(t.box.height()):r)):d*e.resizeRatio<o?e.isAutoResize&&(t.box.width(d*e.resizeRatio-h),u=t.box.width()/i,t.box.height(r*u+m),t.contents.width("image"!=t.type&&i!=t.contents.width()?t.box.width()-(i-t.contents.width()):t.box.width()),t.contents.height("image"!=t.type&&r!=t.contents.height()?t.box.height()-(r-t.contents.height())-m:t.box.height()-m)):("image"==t.type&&t.contents.width(i).height(r),t.box.width()<i&&t.box.width(t.box.width()>0?parseInt(i)+parseInt(t.box.width()):i),t.box.height()<r&&t.box.height(t.box.height()>0?parseInt(r)+parseInt(t.box.height()):r)),"video"==t.type&&t.contents.attr({width:t.target.attr("data-framer-width")||e.width,height:t.target.attr("data-framer-height")||e.height}),e.isCSSAnim&&t.container.width(t.box.outerWidth()).height(t.box.outerHeight())},p=function(t){r.height($(document).height()).width($(window).width()),u()},m=function(){a&&clearTimeout(a),a=setTimeout(function(){a=null,$(window).trigger("scrollComplete.Framer")},500)},u=function(){var i;i=e.isCSSAnim?t.container:t.box,i.stop().animate({top:Math.floor(.5*($(window).height()-t.box.outerHeight()))+$(window).scrollTop(),left:Math.floor(.5*($(window).width()-t.box.outerWidth()))},e.speed)},f=function(t,e){return t.match(/youtube\.com\/watch/i)||t.match(/youtu\.be/i)||"youtube"==e?"youtube":t.match(/vimeo\.com/i)||"vimeo"==e?"vimeo":t.match(/soundcloud\.com/i)||"soundcloud"==e?"soundcloud":t.match(/twitch\.tv/i)||"twitch"==e?"twitch":"#"==t.substr(0,1)||"inline"==e?"inline":"video"==e?"video":"iframe"==e?"iframe":"ajax"==e?"ajax":t.match(/\.(gif|jpg|jpeg|png)$/i)||"image"==e?"image":void 0},g=function(){return $(t.target.attr("href")).show()},w=function(){var i=$('<video id="Framer_video"></video>');i.attr({width:t.target.attr("data-framer-width")||e.width,height:t.target.attr("data-framer-height")||e.height}),i.addClass(t.target.attr("data-framer-video-class"));var r=t.target.attr("href");return r.match(/\.mp4$/i)?i.append('<source src="'+r+'" type="video/mp4" />'):r.match(/\.webm$/i)?i.append('<source src="'+r+'" type="video/webm" />'):r.match(/\.ogv$/i)?i.append('<source src="'+r+'" type="video/ogv" />'):(i.append('<source src="'+r+'.mp4" type="video/mp4" />'),i.append('<source src="'+r+'.webm" type="video/webm" />'),i.append('<source src="'+r+'.ogv" type="video/ogv" />')),i},b=function(){var i=t.target.attr("href").match(/(youtube\.com|youtu\.be)\/(v\/|u\/|embed\/|watch\?v=)?([^#\&\?]*).*/i),r=i[3],a=$('<iframe frameborder="0"></iframe>');return a.attr({src:"http://www.youtube.com/embed/"+r+"?wmode=opaque",width:t.target.attr("data-framer-width")||e.width,height:t.target.attr("data-framer-height")||e.height}),a},v=function(){var i=t.target.attr("href").match(/vimeo\.com\/([^#\&\?]*).*/i),r=i[1],a=$('<iframe frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>');return a.attr({src:"http://player.vimeo.com/video/"+r,width:t.target.attr("data-framer-width")||e.width,height:t.target.attr("data-framer-height")||e.height}),a},y=function(){console.log("getTwitchContents");var e,i=!0;if(t.target.attr("href").match(/\/[a-z]{1}\/[0-9]+$/i)&&(i=!1),console.log(i),i){var e=$('<iframe frameborder="0" scrolling="no"></iframe>');e.attr({src:t.target.attr("href")+"/embed",width:t.target.attr("data-framer-width")||620,height:t.target.attr("data-framer-height")||378})}else{var r=t.target.attr("href").match(/twitch\.tv\/([^#\&\?\/]*)\/v\/([0-9]*)/i),a=r[1],o=r[2],e=$('<object bgcolor="#000000" data="http://www.twitch.tv/swflibs/TwitchPlayer.swf" id="clip_embed_player_flash" type="application/x-shockwave-flash"></object>'),n='<param name="movie" value="http://www.twitch.tv/swflibs/TwitchPlayer.swf" /><param name="allowScriptAccess" value="always" /><param name="allowNetworking" value="all" /><param name="allowFullScreen" value="true" /><param name="flashvars" value="channel=%channel%&auto_play=false&start_volume=25&videoId=v%videoId%&device_id=65b095e38ed0b7d9" />';n=n.replace("%channel%",a),n=n.replace("%videoId%",o),e.attr({width:t.target.attr("data-framer-width")||620,height:t.target.attr("data-framer-height")||378}),e.append(n)}return e},x=function(){var i=$('<iframe frameborder="0"></iframe>');return i.attr({src:"https://w.soundcloud.com/player/?url="+t.target.attr("href"),width:t.target.attr("data-framer-width")||e.width,height:"166"}),i},S=function(){var i=$(e.iframe);return i.attr({src:t.target.attr("href"),width:t.target.attr("data-framer-width")||e.width,height:t.target.attr("data-framer-height")||e.height}),i},C=function(){$.ajax({type:"GET",url:t.target.attr("href"),dataType:t.target.attr("data-framer-ajax-type")||e.ajaxDataType,success:function(e){t.contents=$(e),s()},error:function(e,i){t.contents=$("<span>"+i+"</span>"),s()}})},F=function(t){for(var e=[],i,r=t.slice(t.indexOf("?")+1).split("&"),a=0;a<r.length;a++)i=r[a].split("="),e.push(i[0]),e[i[0]]=i[1];return e},T=function(){var t=location.href,e=t.split("/"),i=e[e.length-1];return i.match(/.html$/)?e[e.length-2]:i},j=function(t){var e,i;return"undefined"!=typeof t.naturalWidth?(e=t.naturalWidth,i=t.naturalHeight):"undefined"!=typeof t.runtimeStyle?(e=t.width,i=t.height):(e=t.width,i=t.height),{width:e,height:i}},z=function(){return $.support.checkOn&&$.support.noCloneEvent&&!$.support.noCloneChecked&&!$.support.cors?!0:$.support.opacity?!1:!0},k=function(){return $.support.opacity?!1:$.support.hrefNormalized?!0:!1},I=function(t){var e=t.originalEvent.state;null==e&&1==o&&$.Framer.close()};return e.isPushState&&$(window).on("popstate",$.proxy(I,this)),this.on("click.Framer",$.Framer.open),this}}(jQuery),!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var i,r=document.createElement(t||"div");for(i in e)r[i]=e[i];return r}function e(t){for(var e=1,i=arguments.length;i>e;e++)t.appendChild(arguments[e]);return t}function i(t,e,i,r){var a=["opacity",e,~~(100*t),i,r].join("-"),o=.01+i/r*100,n=Math.max(1-(1-t)/e*(100-o),t),d=h.substring(0,h.indexOf("Animation")).toLowerCase(),s=d&&"-"+d+"-"||"";return l[a]||(p.insertRule("@"+s+"keyframes "+a+"{0%{opacity:"+n+"}"+o+"%{opacity:"+t+"}"+(o+.01)+"%{opacity:1}"+(o+e)%100+"%{opacity:"+t+"}100%{opacity:"+n+"}}",p.cssRules.length),l[a]=1),a}function r(t,e){var i,r,a=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<c.length;r++)if(i=c[r]+e,void 0!==a[i])return i;return void 0!==a[e]?e:void 0}function a(t,e){for(var i in e)t.style[r(t,i)||i]=e[i];return t}function o(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)void 0===t[r]&&(t[r]=i[r])}return t}function n(t,e){return"string"==typeof t?t:t[e%t.length]}function d(t){this.opts=o(t||{},d.defaults,m)}function s(){function i(e,i){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}p.addRule(".spin-vml","behavior:url(#default#VML)"),d.prototype.lines=function(t,r){function o(){return a(i("group",{coordsize:c+" "+c,coordorigin:-h+" "+-h}),{width:c,height:c})}function d(t,d,s){e(p,e(a(o(),{rotation:360/r.lines*t+"deg",left:~~d}),e(a(i("roundrect",{arcsize:r.corners}),{width:h,height:r.width,left:r.radius,top:-r.width>>1,filter:s}),i("fill",{color:n(r.color,t),opacity:r.opacity}),i("stroke",{opacity:0}))))}var s,h=r.length+r.width,c=2*h,l=2*-(r.width+r.length)+"px",p=a(o(),{position:"absolute",top:l,left:l});if(r.shadow)for(s=1;s<=r.lines;s++)d(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;s<=r.lines;s++)d(s);return e(t,p)},d.prototype.opacity=function(t,e,i,r){var a=t.firstChild;r=r.shadow&&r.lines||0,a&&e+r<a.childNodes.length&&(a=a.childNodes[e+r],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=i))}}var h,c=["webkit","Moz","ms","O"],l={},p=function(){var i=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),m={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};d.defaults={},o(d.prototype,{spin:function(e){this.stop();var i=this,r=i.opts,o=i.el=a(t(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex});if(r.radius+r.length+r.width,a(o,{left:r.left,top:r.top}),e&&e.insertBefore(o,e.firstChild||null),o.setAttribute("role","progressbar"),i.lines(o,i.opts),!h){var n,d=0,s=(r.lines-1)*(1-r.direction)/2,c=r.fps,l=c/r.speed,p=(1-r.opacity)/(l*r.trail/100),m=l/r.lines;!function u(){d++;for(var t=0;t<r.lines;t++)n=Math.max(1-(d+(r.lines-t)*m)%l*p,r.opacity),i.opacity(o,t*r.direction+s,n,r);i.timeout=i.el&&setTimeout(u,~~(1e3/c))}()}return i},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(r,o){function d(e,i){return a(t(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:e,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*c+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var s,c=0,l=(o.lines-1)*(1-o.direction)/2;c<o.lines;c++)s=a(t(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:h&&i(o.opacity,o.trail,l+c*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&e(s,a(d("#000","0 0 4px #000"),{top:"2px"})),e(r,e(s,d(n(o.color,c),"0 0 1px rgba(0,0,0,.1)")));return r},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}});var u=a(t("group"),{behavior:"url(#default#VML)"});return!r(u,"transform")&&u.adj?s():h=r(u,"animation"),d});